# Story 1.13: Session Management & Window Persistence

## Status
Draft

## Story
**As a** IDE power user
**I want** automatic restoration of workspace layout, open files, and host connections across sessions
**so that** I can resume work exactly where I left off after closing the IDE or logging out

## Acceptance Criteria
1. Persist open files, active hosts, debugger sessions, and window layout when the IDE exits or user logs out.
2. Integrate with 4Dwm session manager so IRIX logout/login restores windows and states automatically.
3. Handle multi-desk setups by saving desk assignments and restoring windows to the correct virtual screen.
4. Expose user controls to toggle session persistence per workspace and to clear saved state.
5. Add integration tests simulating logout/login round-trip verifying restored layout and resources.

## Tasks / Subtasks
- [ ] Define session state schema and storage location (IRIX SQLite/flat-file config).
- [ ] Implement save/restore hooks in the IRIX client on shutdown/start.
- [ ] Coordinate with backend to capture active connections and resubscribe upon restore.
- [ ] Add settings UI to manage session persistence options.
- [ ] Write integration tests automating simulated logout and verifying restoration.

## Dev Notes
- Session management guidelines in `docs/007-2167-006/sgi_html/ch03.html` (Desks & session management).
- PRD workflow references in `docs/prd.md#workflow-goals` about resilience.
- Backend coordination doc `docs/team/backend-coordination.md` for telemetry/connection handoff.

## Testing
- Automated restore tests across logout/login plus manual verification for multi-desk window placement.

## Change Log
| Date       | Version | Description                 | Author |
|------------|---------|-----------------------------|--------|
| 2025-09-21 | 0.1     | Initial draft auto-generated | James  |
